@model Notown.Models.NotownViewModels.CreateMusicianViewModel

@{
    ViewData["Title"] = "Create";
}

<script src="~/lib/jquery/dist/jquery.js" type="text/javascript"></script>

<script>
        function ShowInstrumentCreation(element) {

            var text = element.options[element.selectedIndex].text;
            if (text == "Create New...") {
                $("#createInstrument").append(
                      "<div class='form-group'>"
                    +   "<label asp-for='Instrument.ID' class='col-md-2 control-label'> Instrument ID</label >"
                    +   "<div class='col-md-10' > "
                    +       "<input asp-for='Instrument.ID' class='form-control' /> "
                    +       "<span asp- validation-for='Instrument.ID' class='text-danger'></span > "
                    +   "</div> "
                    + "</div> "

                    + "<div class='form-group'> "
                    +   "<label asp-for='Instrument.Name' class='col-md-2 control-label'> Instrument Name</label> "
                    +   "<div class='col-md-10' > <input asp-for='Instrument.Name' class='form-control' /> "
                    +       "<span asp-validation-for='Instrument.Name' class='text-danger'></span >"
                    +   "</div>"
                    + "</div>"

                    + "<div class='form-group'> "
                    +   "<label asp-for='Instrument.Key' class='col-md-2 control-label'> Instrument Key</label>"
                    +   "<div class='col-md-10'> "
                    +       "<input asp-for='Instrument.Key' class='form-control' /> "
                    +       "<span asp- validation-for='Instrument.Key' class='text-danger'></span> "
                    +   "</div>" 
                    + "</div>");
             }
            else {
                $("#createInstrument").empty();
            }

         }

    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<h2>Create</h2>

<form asp-action="Create">
    <div class="form-horizontal">
        <h4>Musician</h4>
        <hr />
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="form-group">
            <label asp-for="Musician.Ssn" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="Musician.Ssn" class="form-control" />
                <span asp-validation-for="Musician.Ssn" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="Musician.Name" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="Musician.Name" class="form-control" />
                <span asp-validation-for="Musician.Name" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="Musician.PlaceID" class="col-md-2 control-label">Address</label>
            <div class="col-md-10">
                <select asp-for="Musician.PlaceID" class ="form-control" asp-items="ViewBag.PlaceID" style="float: left;"></select>
            </div>
        </div>        
        <div class="form-group">
            <label asp-for="Musician.InstrumentID" class="col-md-2 control-label">Instrument</label>
            <div id="selectInstrumentDropDown" class="col-md-10">
                <select asp-for="Musician.InstrumentID" class ="form-control" asp-items="ViewBag.InstrumentID" onchange="ShowInstrumentCreation(this)"></select>
            </div>
        </div>
        <div id="createInstrument">
            <div class="form-group">
                <label asp-for="Instrument.ID" class="col-md-2 control-label">Instrument ID</label>
                <div class="col-md-10">
                    <input asp-for="Instrument.ID" class="form-control" />
                    <span asp-validation-for="Instrument.ID" class="text-danger"></span>
                </div>
            </div>
            <div class="form-group">
                <label asp-for="Instrument.Name" class="col-md-2 control-label">Instrument Name</label>
                <div class="col-md-10">
                    <input asp-for="Instrument.Name" class="form-control" />
                    <span asp-validation-for="Instrument.Name" class="text-danger"></span>
                </div>
            </div>
            <div class="form-group">
                <label asp-for="Instrument.Key" class="col-md-2 control-label">Instrument Key</label>
                <div class="col-md-10">
                    <input asp-for="Instrument.Key" class="form-control" />
                    <span asp-validation-for="Instrument.Key" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
</form>

<div>
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
